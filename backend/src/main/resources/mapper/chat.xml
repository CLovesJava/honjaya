<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.ssafy.honjaya.model.mapper.ChatMapper">

	<!-- 채팅 메시지 불러오기 -->
	<select id="chatList" parameterType="int" resultType="ChatDto">
	select rate_no, rate_score
	from rate
	where rate_from = #{rateFrom} and rate_to = #{rateTo}
	</select>
	
	<!-- 채팅 입력 -->
	<insert id="chatInsert" parameterType="ChatDto" useGeneratedKeys="true" keyProperty="rateNo">
	insert into rate(rate_from, rate_to, rate_score)
	values(#{rateFrom}, #{rateTo}, #{rateScore})
	</insert>
	
	<!-- 채팅 메시지 1개 -->
	<select id="chatSelect" parameterType="int" resultType="ChatDto">
	select rate_no, rate_score
	from rate
	where rate_from = #{rateFrom} and rate_to = #{rateTo}
	</select>
	
	<!-- 채팅 읽음 표시 -->
	<update id="chatRead" parameterType="int">
	update rate set
	rate_score = #{rateScore}
	where rate_no = #{rateNo}
	<!-- 여기서 rateNo를 받을 것인지(프론트에 select 해올 때 미리 저장) -->
	<!-- rateFrom, rateTo를 받을 것인지 결정해야 함 -->
	<!-- (Delete도 마찬가지) -->
	</update>
	
</mapper>